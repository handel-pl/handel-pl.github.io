<!doctype html>
<html>
  <head>
    <script src="https://unpkg.com/handel-pl@0.7.0"></script>
    <script src="script.js"></script>
    <style>
     body {
       font-family:  'Courier New', Courier, monospace;
       font-size: 18px;
     } 
     h1 {
       font-weight: 500;
     }
     h2 {
       font-weight: 500;
     }
     pre {
       padding: 10px;
       font-size: 15px;
       background-color: rgb(30, 30, 30);
       color: white;
       overflow: auto;
     }
     .content {
       margin-right: 150px;
       margin-left: 150px;
       padding: 10px;
       border-radius: 10px;
     }
     #handel {
       background-color: crimson;
       color: white;
       font-weight: 300;
       padding: 5px;
     }
     .runbtn {
         background-color: crimson;
         color: white;
         width: 45px;
         padding: 5px;
         border-radius: 5px;
     }
     .runbtn:hover {
        transform: scale(1.1);
        cursor: pointer;
     }
    </style>
  </head>
  <body>
    <h1 id="handel">handel</h1>
    <div class="content">
<p>Handel is a small procedural programming language for writting songs in browser. </p>
<p>The Handel Interpreter interprets Handel programs and plays compositions in browser, thanks to <a href="https://tonejs.github.io/">Tone.js</a>.</p>
<p>Try the Handel Web Editor here: <a href="https://ddj231.github.io/Handel-Web-Editor/">Handel Web Editor</a></p>
<p>Check out the Handel Github repo: <a href="https://github.com/ddj231/Handel">Handel on Github</a></p>
<p>See the language documentation (including latest features): <a href="https://ddj231.github.io/Handel-Documentation/docs/">Handel Documentation</a></p>
<p>Join the <a href="https://groups.google.com/g/handel-pl">Handel forum</a> to ask questions and showcase compositions. Also check out the <a href="https://github.com/ddj231/Handel/blob/master/Contributing.md">Contributing</a> guidelines.</p>
<p><em>soli deo gloria</em></p>

<h1 id="installation">Installation</h1>
<p>Add the below to your html document: </p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/handel-pl"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>You&#39;re all set!</p>
<p><strong>Alternatively</strong> </p>
<p>Install Handel with the following: </p>
<pre><code>npm <span class="hljs-selector-tag">i</span> handel-pl
</code></pre><p>And import Handel with the following:</p>
<pre><code><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Handel <span class="hljs-keyword">from</span> <span class="hljs-string">'handel-pl'</span>;
</code></pre>

<h1 id="usage">Usage</h1>
<h2 id="example-handel-snippet">Example Handel Snippet</h2>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">chunk</span> example 
        play E3, C3, G3 <span class="hljs-keyword">for</span> <span class="hljs-number">2</span>b
    endchunk
    run example <span class="hljs-keyword">with</span> sound piano, <span class="hljs-keyword">loop</span> <span class="hljs-keyword">for</span> <span class="hljs-number">5</span> 
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runone" class="runbtn">Run</div>
<p>See the Examples folder <a href="https://github.com/ddj231/Handel/tree/master/Examples">here</a> for example Handel programs and inspiration.</p>
<h2 id="example-using-handel-in-browser">Example Using Handel In Browser</h2>
<pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clicked</span><span class="hljs-params">()</span></span>{
    Handel.RunHandel(`
        start
            chunk example using somePlayable 
                play somePlayable 
                rest <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
            endchunk
            save myPlayable = Eb3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
            run example using myPlayable <span class="hljs-keyword">with</span> sound piano, loop <span class="hljs-keyword">for</span> <span class="hljs-number">5</span> 
        finish
    `)
}
document.addEventListener(<span class="hljs-string">"click"</span>, clicked);
</code></pre>

<p>Note that you pass the Handel code into the <strong>RunHandel</strong> function <code>Handel.RunHandel(someHandelCode)</code>.</p>
<p>To compile to midi, pass a config object to the RunHandel function with <strong>outputMidi</strong> set to true. </p>
<pre><code><span class="hljs-keyword">const</span> <span class="hljs-built_in">config</span> = {outputMidi: true};
Handel.RunHandel(`start play E4 <span class="hljs-built_in">for</span> <span class="hljs-number">1</span>b finish`, <span class="hljs-built_in">config</span>);
</code></pre><p>Additionally, you can use the <strong>StopHandel</strong> function to stop a running Handel program. <code>Handel.StopHandel()</code></p>

<h1 id="getting-started">Getting started</h1>
<p>Handel programs are contained within the <strong>start</strong> and <strong>finish</strong> keywords. Below is a complete Handel program:</p>
<pre><code><span class="hljs-keyword">start</span>
    play E4 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runtwo" class="runbtn">Run</div>
<p>The program above only plays 1 note. But it&#39;s a start!</p>
<h1 id="let-s-play-something">Let&#39;s play something</h1>
<p>You can be play notes and chords using the play command. Below is an example program that plays a note, then a chord:</p>
<pre><code>start
    <span class="hljs-keyword">play</span> C#<span class="hljs-number">3</span> <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    <span class="hljs-keyword">play</span> E3, G3, A4 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
finish
</code></pre>
<div id="runthree" class="runbtn">Run</div>
<p>Note the syntax above. A <strong>play</strong> command begins with the <strong>play</strong> keyword, then a note or chord (a list of notes separated by commas) follows.</p>
<p>Lastly play commands need a duration. The play commands above end with &#39;for 1b&#39;. This states how long the particular note or notelist (chord) should be held.  </p>
<p>Phew! We&#39;re getting somewhere.</p>
<h1 id="let-s-rest">Let&#39;s rest</h1>
<p>Similar to the play command, a rest can played using the rest command. Below is an example program that rests for 1 beat then plays a note for 2 beats.</p>
<pre><code><span class="hljs-keyword">start</span>
    rest <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    play G5 <span class="hljs-keyword">for</span> <span class="hljs-number">2</span>b
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runfour" class="runbtn">Run</div>
<h1 id="but-are-there-variables-">But are there Variables?</h1>
<p>tl;dr
Here is a code snippet showing variables in Handel </p>
<pre><code><span class="hljs-keyword">start</span>
<span class="hljs-keyword">save</span> mynotelist = Cb3, D3
<span class="hljs-keyword">save</span> myduration = <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
<span class="hljs-keyword">save</span> myplayable = E4, F4, G3 <span class="hljs-keyword">for</span> <span class="hljs-number">3</span>b

<span class="hljs-keyword">save</span> myotherplayable = mynotelist <span class="hljs-keyword">for</span> myduration

play myplayable
rest myduration
play myotherplayable
<span class="hljs-keyword">finish</span>
</code></pre>

<div id="runfifteen" class="runbtn">Run</div>
<p>You can declare Variables in Handel. Variables store four builtin types in Handel: Digits, Notelists, Durations, Playables.</p>

<p>A <strong>Digit</strong> is a positive or negative integer. 

<p>A <strong>Notelist</strong> is a single note name, or a list of note names separated by commas.</p>
<p>For example:</p>
<pre><code><span class="hljs-keyword">Bb3
</span>G<span class="hljs-number">#2</span>, <span class="hljs-built_in">A2</span>
</code></pre><p>A <strong>Duration</strong> is the keyword <strong>for</strong> followed by a beat.</p>
<p>Here are some example durations: </p>
<pre><code><span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
<span class="hljs-keyword">for</span> <span class="hljs-number">2</span>b
<span class="hljs-keyword">for</span> <span class="hljs-number">16</span>b
<span class="hljs-keyword">for</span> <span class="hljs-number">32</span>b
</code></pre><p>Lastly, we&#39;ve already seen <strong>Playables</strong> above. Playables are a note or notelist (chord) followed by a duration.
Here are some example playables.</p>
<pre><code>Bb3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
D<span class="hljs-string">#6</span>, E<span class="hljs-string">#6</span>, G3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
</code></pre><p><em>no promises that the above chord sounds pleasing to the ear :p</em></p>
<p>Finally variables!</p>
<p>To store a notelist, playable or a duration use the <strong>save</strong> keyword, followed by a variable name, an equal sign and a notelist, playable, duration (or another variable which stores on of these values).</p>
<p>Variable names must contain only lowercase letters, and no numbers. Variable names must also not be any of the reserved keywords in Handel. (See the Reserved Keywords section below). </p>
<p>Below is an example program using variables.</p>
<pre><code>start
    <span class="hljs-built_in">save</span> mynote = E2
    <span class="hljs-built_in">save</span> myplayablenote = mynote <span class="hljs-keyword">for</span> 2b
    <span class="hljs-built_in">save</span> myrest = <span class="hljs-keyword">for</span> 2b

    play myplayablenote
    <span class="hljs-built_in">rest</span> myrest
    play myplayablenote
    <span class="hljs-built_in">rest</span> myrest
finish
</code></pre>
<div id="runfive" class="runbtn">Run</div>
<p>OK! So far so good!</p>

<h2 id="reassignment-and-shifting-values">Reassignment and Shifting values</h2>
<p>All variables in Handel can be shifted using the <code>rshift</code> and <code>lshift</code> keywords. You can think of this as the equivalent of <code>+=</code> and <code>-=</code> respectively. </p>
<p>For variables of type digit, this shifting is exactly the equivalent of addition and subtraction.</p>
<p>For notelists shifting changes the note, left or right by a number of semitones.</p>
<p>The following example reassigns (or shifts) <code>`mynotelist</code> down/left by one semitone. Then up/right by two semitones.</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">save</span> mynotelist = B3 

    <span class="hljs-keyword">update</span> mynotelist lshift <span class="hljs-number">1</span>
    play mynotelist <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b

    <span class="hljs-keyword">update</span> mynotelist rshift <span class="hljs-number">2</span>
    play mynotelist <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runten" class="runbtn">Run</div>

<p>Durations and Playables can also be shifted. </p>
<p>Shifting a duration increases or decreases its beat value.</p>
<p>Shifting a playable increases of decreass its notelist.</p>
<p>For example:</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">save</span> <span class="hljs-keyword">duration</span> = <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    <span class="hljs-keyword">save</span> playable = E3, G3 <span class="hljs-keyword">for</span> <span class="hljs-number">2</span>b

    <span class="hljs-keyword">update</span> <span class="hljs-keyword">duration</span> rshift <span class="hljs-number">1</span> 
    <span class="hljs-keyword">update</span> playable lshift <span class="hljs-number">2</span> 

    play playable
    rest <span class="hljs-keyword">duration</span>
    play playable
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runeleven" class="runbtn">Run</div>




<h1 id="blocks-loops">Blocks loops</h1>
<p>Handel supports block loops.  Block loops begin with the <strong>block</strong> keyword and end with the <strong>endblock</strong> keyword and a <code>loop for digit</code> or <code>loop while condition</code> customization.</p>
<p>Here is an example two block loops in Handel.</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">block</span> 
        play C3, E3, G3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b 
        play D3, F3, A3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b 
    endblock <span class="hljs-keyword">loop</span> <span class="hljs-keyword">for</span> <span class="hljs-number">2</span> 

    <span class="hljs-keyword">save</span> note = C2
    <span class="hljs-keyword">block</span> 
        play note <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b 
        <span class="hljs-keyword">update</span> note rshift <span class="hljs-number">1</span>
    endblock <span class="hljs-keyword">loop</span> <span class="hljs-keyword">while</span> note lessthan C3
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runtwelve" class="runbtn">Run</div>
<p>Block loops are blocking (no pun intended), and should not be confused with Handel&#39;s procedures (chunks).</p>
<p>More on procedures below.</p>
<h1 id="conditionals-if-else-blocks-">Conditionals (if - else blocks)</h1>
<p>Though booleans are not built in types in Handel, Handel now supports conditonals.</p>
<p>The syntax for an if - else block is as follows.</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">if</span> E4 greaterthan Cb3 <span class="hljs-keyword">then</span>
        play E4 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b 
    <span class="hljs-keyword">else</span>
        play Cb3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    endif

    <span class="hljs-keyword">save</span> mydigit = <span class="hljs-number">5</span>
    <span class="hljs-keyword">if</span> mydigit equalto <span class="hljs-number">5</span> <span class="hljs-keyword">then</span>
        play C2 <span class="hljs-keyword">for</span> <span class="hljs-number">5</span>b
    endif
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runthirteen" class="runbtn">Run</div>
<p>The above (though it contains trivial conditionals) plays E4 for 1 beat. Note that <b>else </b> blocks are optional.</p>


<h1 id="procedures-i-thought-this-was-a-procedural-programming-language-"greaterthan>Procedures (I thought this was a procedural programming language?)</h1>
<p>Procedures in Handel are called chunks. You can conceptualize a <strong>chunk</strong> as a song track. When ran,
chunks play at the same time as other run chunks and the global track. Chunks must begin with the <strong>chunk</strong>
keyword and end with the <strong>endchunk</strong> keyword.</p>
<p>Below is an example program with a kick drum and a piano, playing together.</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">chunk</span> backbeat <span class="hljs-keyword">using</span> myplayable
        play myplayable 
    endchunk

    <span class="hljs-keyword">chunk</span> mykeys 
        play E3, G3, A3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
        play G3, A2, C3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
        play F3, A3, C3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
        play D3, F2, A3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    endchunk

    run mykeys <span class="hljs-keyword">with</span> sound piano, <span class="hljs-keyword">loop</span> <span class="hljs-keyword">for</span> <span class="hljs-number">2</span>

    <span class="hljs-keyword">save</span> myplayable = A1 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b

    run backbeat <span class="hljs-keyword">using</span> myplayable <span class="hljs-keyword">with</span> sound kick, <span class="hljs-keyword">loop</span> <span class="hljs-keyword">for</span> <span class="hljs-number">8</span>
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runsix" class="runbtn">Run</div>
<p>Both the &#39;backbeat&#39; chunk and the &#39;mykeys&#39; chunk above play together (not one after the other). This
behavior allows multitrack songs to be created with Handel. </p>
<h1 id="more-on-procedures-chunks-and-their-syntax">More on procedures (chunks) and their syntax</h1>
<h2 id="procedure-declaration-creating-chunks-">Procedure declaration (creating chunks)</h2>
<p>As noted above you can create chunks with the <strong>chunk</strong> keyword. The name of the <strong>chunk</strong> (the chunk name) follows the keyword.</p>
<p>This chunk name must be all lowercase letters, no numbers and cannot be one of Handel&#39;s reserved keywords. (See the Reserved Keywords section below).</p>
<p>After the chunk name, you can optionally add parameters. A list of comma separated parameters can follow the <strong>using</strong> keyword.</p>
<p>Together you get the following: <code>chunk somechunkname using someparam, anotherparam</code></p>
<p>After the optional parameter list, you can add a body to the chunk. This is a function body (what you would like to happen when the chunk is ran).</p>
<p>Lastly the chunk must be ended with the <strong>endchunk</strong> keyword.</p>
<h2 id="running-procedures">Running Procedures</h2>
<p>You can run a chunk using the <strong>run</strong> keyword.</p>
<p>To run a chunk use the <strong>run</strong> command followed by the name of the chunk. </p>
<p>If the chunk has parameters, a you must use a matching number of comma separated arguments.</p>
<p>Here is an example running two chunks. One chunk requires arguments the other does not.</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">chunk</span> noargs
        play C3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    endchunk

    <span class="hljs-keyword">chunk</span> withtwoargs <span class="hljs-keyword">using</span> argone, argtwo
        play argone
        play argtwo
    endchunk

    run noargs
    <span class="hljs-keyword">save</span> somevar = Cb4 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b
    run withtwoargs <span class="hljs-keyword">using</span> E3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b,  somevar
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runseven" class="runbtn">Run</div>
<p>Note that saved variables, playables, or durations, can be used as arguments when running a chunk.</p>
<p>OK! Now to configuring a run of a chunk.</p>
<h2 id="configuring-a-run-of-a-chunk">Configuring a run of a chunk</h2>
<p>You can configure a run of chunk by adding the <strong>with</strong> keyword and a comma separated list of customizations to the end of a run command.</p>
<p>There are three main customizations: <strong>bpm</strong>, <strong>sound</strong>, and <strong>loop</strong>.</p>
<p>You can use <strong>bpm</strong> keyword to set the bpm of a run of a chunk.</p>
<p>For example <code>bpm 120</code></p>
<p>You can use the <strong>sound</strong> keyword to set the instrument of a run of a chunk.</p>
<p>For example <code>sound piano</code></p>
<p>The current available sounds to choose from are: piano, synth, casio, kick, snare, hihat</p>
<p>You can use the <strong>loop</strong> keyword to set the amount of times the run of a chunk shoud loop for.</p>
<p>For example <code>loop for 10</code></p>
<p>All together you can configure a run of a chunk as follows:</p>
<pre><code><span class="hljs-keyword">start</span>
    <span class="hljs-keyword">chunk</span> withargs <span class="hljs-keyword">using</span> somechord 
        play somechord 
    endchunk

    run withargs <span class="hljs-keyword">using</span> E3, G3, F3 <span class="hljs-keyword">for</span> <span class="hljs-number">1</span>b <span class="hljs-keyword">with</span> bpm <span class="hljs-number">100</span>, <span class="hljs-keyword">loop</span> <span class="hljs-keyword">for</span> <span class="hljs-number">8</span>, sound piano 
<span class="hljs-keyword">finish</span>
</code></pre>
<div id="runeight" class="runbtn">Run</div>
<p>Above we&#39;ve got a chord, played with a piano, looping 8 times, with a bpm of 100!</p>

<h2 id="custom-instruments">Custom Instruments</h2>
<p>Handel (v0.4.0 and up) allows custom instruments to be loaded into Handel Programs. Instruments can be created and added to a run of a Handel program as follows.</p>
<pre><code><span class="hljs-keyword">let</span> myinst = Handel.MakeInstrument({
    A1: <span class="hljs-string">'https://tonejs.github.io/audio/casio/A1.mp3'</span>, 
    A2: <span class="hljs-string">'https://tonejs.github.io/audio/casio/A2.mp3'</span>
})
<span class="hljs-keyword">let</span> config = {}
config.instruments = {funkyinst: myinst} 
Handel.RunHandel(`
    <span class="hljs-keyword">start</span>
        load funkyinst <span class="hljs-keyword">as</span> funky 
        chunk example 
            play E4 <span class="hljs-keyword">for</span> <span class="hljs-number">4</span>b
        enchunk
        run example with sound funky
    finish
`, config)
</code></pre><p>The <code>MakeInstrument</code> function wraps Tone.js&#39;s sampler constructor. It takes a urls object as its argument. This urls object, maps note names matched to their location (locally or not). One or more mappings can be used.</p>
<p>After making an instrument above, we add it to our config object and run the Handel program with that config.</p>
<p>Within the Handel program we load the instrument as follows: <code>load configInstrumentName as nameOfInstrumentWithinHandel</code> </p>
<p><strong>Note</strong>: this feature makes your Handel program less portable but gives you the freedom of using arbitrary instruments in your Handel program.</p>
</html>